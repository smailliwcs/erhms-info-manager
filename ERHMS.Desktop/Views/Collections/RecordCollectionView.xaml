<UserControl x:Class="ERHMS.Desktop.Views.Collections.RecordCollectionView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:b="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:local="clr-namespace:ERHMS.Desktop"
             xmlns:Behaviors="clr-namespace:ERHMS.Desktop.Behaviors"
             xmlns:Controls="clr-namespace:ERHMS.Desktop.Controls">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ERHMS Info Manager;component/Resources/App.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Style x:Key="RecordProperty" TargetType="TextBlock">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Item.Value.Deleted, RelativeSource={RelativeSource FindAncestor, AncestorType=DataGridRow}}" Value="True">
                        <Setter Property="TextDecorations" Value="Strikethrough" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <WrapPanel Grid.Row="0">
            <Controls:IconButton AltText="Create"
                                 Command="{Binding CreateCommand}"
                                 Content="{x:Static local:Icons.plus}" />
            <Controls:IconButton AltText="Edit"
                                 Command="{Binding EditCommand}"
                                 Content="{x:Static local:Icons.pen}" />
            <Controls:IconButton AltText="Delete"
                                 Command="{Binding DeleteCommand}"
                                 Content="{x:Static local:Icons.trash}" />
            <Controls:IconButton AltText="Undelete"
                                 Command="{Binding UndeleteCommand}"
                                 Content="{x:Static local:Icons.trash_restore}" />
        </WrapPanel>
        <Border Grid.Row="1"
                Background="{Binding Background, ElementName=RecordDataGrid}"
                Margin="{StaticResource DefaultMargin}">
            <DataGrid x:Name="RecordDataGrid"
                      HorizontalAlignment="Left"
                      ItemsSource="{Binding Items}"
                      Margin="0">
                <DataGrid.ItemContainerStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="IsSelected" Value="{Binding Selected}" />
                    </Style>
                </DataGrid.ItemContainerStyle>
                <b:Interaction.Behaviors>
                    <Behaviors:EnhanceKeyboardNavigation />
                </b:Interaction.Behaviors>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>

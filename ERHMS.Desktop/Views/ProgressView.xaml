<Window x:Class="ERHMS.Desktop.Views.ProgressView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:Properties="clr-namespace:ERHMS.Desktop.Properties"
        ResizeMode="NoResize"
        SizeToContent="Height"
        Title="{x:Static Properties:Resources.AppTitle}"
        Width="480"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <Style TargetType="Button" BasedOn="{StaticResource DialogButton}" />
    </Window.Resources>
    <StackPanel>
        <Border BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                BorderThickness="0,1,0,0"
                SnapsToDevicePixels="True"
                Style="{StaticResource LayoutFull}">
            <StackPanel Style="{StaticResource Container}">
                <TextBlock Foreground="{DynamicResource AccentTextBrush}"
                           Style="{StaticResource Lead}"
                           Text="{Binding TaskName}" />
                <ProgressBar IsIndeterminate="True" />
                <TextBlock Style="{StaticResource Body}"
                           Text="{Binding Status}"
                           TextTrimming="CharacterEllipsis"
                           TextWrapping="NoWrap" />
            </StackPanel>
        </Border>
        <Border Background="{DynamicResource {x:Static SystemColors.MenuBarBrushKey}}"
                BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}"
                BorderThickness="0,1,0,0"
                SnapsToDevicePixels="True"
                Visibility="{Binding CanUserCancel, Converter={StaticResource BoolToVisibilityConverter}}">
            <WrapPanel HorizontalAlignment="Right"
                       Style="{StaticResource Container}">
                <Button Command="{Binding CancelCommand}">
                    <Button.Style>
                        <Style TargetType="Button" BasedOn="{StaticResource DialogButton}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsUserCancellationRequested}" Value="True">
                                    <Setter Property="Content" Value="Cancelling..." />
                                </DataTrigger>
                            </Style.Triggers>
                            <Setter Property="Content" Value="Cancel" />
                        </Style>
                    </Button.Style>
                </Button>
            </WrapPanel>
        </Border>
    </StackPanel>
</Window>

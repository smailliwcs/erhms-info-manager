<UserControl x:Class="ERHMS.Desktop.Views.HomeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:Converters="clr-namespace:ERHMS.Desktop.Converters"
             xmlns:Properties="clr-namespace:ERHMS.Desktop.Properties"
             xmlns:Domain="clr-namespace:ERHMS.Domain;assembly=ERHMS.Domain">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ERHMS Info Manager;component/Resources/App.xaml" />
            </ResourceDictionary.MergedDictionaries>
            <Converters:KeyToResXResourceConverter x:Key="CoreViewNameToDescriptionConverter"
                                                   Prefix="CoreView.Description." />
            <Converters:KeyToResXResourceConverter x:Key="CoreViewNameToTitleConverter"
                                                   Prefix="CoreView.Title." />
            <Converters:PhaseToCoreViewsConverter x:Key="PhaseToCoreViewsConverter" />
            <Converters:PhaseToColorConverter x:Key="PhaseToColorConverter" />
            <Converters:PhaseToCoreProjectNameConverter x:Key="PhaseToCoreProjectNameConverter" />
            <Converters:StringCaseConverter x:Key="PhaseToLowerCaseCoreProjectNameConverter"
                                            BaseConverter="{StaticResource PhaseToCoreProjectNameConverter}"
                                            Format="{}{0:L}" />
            <Converters:KeyToResXResourceConverter x:Key="PhaseToNameConverter"
                                                   Prefix="Phase.Name." />
            <Converters:PhaseToColorConverter x:Key="PhaseToStartColorConverter"
                                              Alpha="0x40" />
            <Converters:PhaseToColorConverter x:Key="PhaseToStopColorConverter"
                                              Alpha="0x00" />
        </ResourceDictionary>
    </UserControl.Resources>
    <ScrollViewer>
        <Border Style="{StaticResource SmallLayout}">
            <StackPanel Style="{StaticResource Container}">
                <Grid Style="{StaticResource Section}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Image Grid.Column="0"
                           AutomationProperties.Name="{x:Static Properties:ResXResources.Description_AppLogo}"
                           Margin="{StaticResource DefaultMargin}"
                           Source="../Resources/ERHMS.ico"
                           Width="64">
                    </Image>
                    <TextBlock Grid.Column="1"
                               Style="{StaticResource Title}"
                               Text="{x:Static Properties:ResXResources.Title_App}"
                               VerticalAlignment="Center" />
                </Grid>
                <ItemsControl IsTabStop="False">
                    <ItemsControl.Items>
                        <Domain:Phase>PreDeployment</Domain:Phase>
                        <Domain:Phase>Deployment</Domain:Phase>
                        <Domain:Phase>PostDeployment</Domain:Phase>
                    </ItemsControl.Items>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Style="{StaticResource Section}">
                                <Border Margin="{StaticResource DefaultMargin}"
                                        Padding="{StaticResource DefaultPadding}">
                                    <Border.Background>
                                        <LinearGradientBrush StartPoint="0.5,0" EndPoint="1,0">
                                            <GradientStop Color="{Binding Converter={StaticResource PhaseToStartColorConverter}}"
                                                          Offset="0" />
                                            <GradientStop Color="{Binding Converter={StaticResource PhaseToStopColorConverter}}"
                                                          Offset="1" />
                                        </LinearGradientBrush>
                                    </Border.Background>
                                    <TextBlock Style="{StaticResource Heading}"
                                               Text="{Binding Converter={StaticResource PhaseToNameConverter}}" />
                                </Border>
                                <TextBlock Style="{StaticResource Body}">
                                    <Run>Select a form or</Run>
                                    <Hyperlink>view all forms</Hyperlink>
                                    <Run>in the</Run>
                                    <Run Text="{Binding Mode=OneWay, Converter={StaticResource PhaseToLowerCaseCoreProjectNameConverter}}" />
                                </TextBlock>
                                <ItemsControl IsTabStop="False"
                                              ItemsSource="{Binding Converter={StaticResource PhaseToCoreViewsConverter}}">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="2" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Button AutomationProperties.HelpText="{Binding Name, Converter={StaticResource CoreViewNameToDescriptionConverter}}"
                                                    AutomationProperties.Name="{Binding Name, Converter={StaticResource CoreViewNameToTitleConverter}}"
                                                    Background="{x:Static SystemColors.ControlLightLightBrush}">
                                                <Button.Resources>
                                                    <Style TargetType="TextBlock" BasedOn="{StaticResource Body}">
                                                        <Setter Property="HorizontalAlignment" Value="Center" />
                                                        <Setter Property="TextAlignment" Value="Center" />
                                                    </Style>
                                                </Button.Resources>
                                                <StackPanel>
                                                    <TextBlock FontSize="{StaticResource MediumFontSize}"
                                                               Text="{Binding Name, Converter={StaticResource CoreViewNameToTitleConverter}}" />
                                                    <TextBlock FontSize="{StaticResource SmallFontSize}"
                                                               Text="{Binding Name, Converter={StaticResource CoreViewNameToDescriptionConverter}}" />
                                                </StackPanel>
                                            </Button>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </Border>
    </ScrollViewer>
</UserControl>
